const wrapper=document.querySelectorAll(".keyboard_wrapper> div");let i=1,cursor_position=null;function getOS(){return navigator.appVersion.indexOf("Windows")>=0?"Windows":navigator.appVersion.indexOf("Linux")>=0?"Linux":0==navigator.appVersion.indexOf("Sun")?"SunOS":0==navigator.appVersion.indexOf("Mac")?"MacOS":void 0}console.log(navigator.appVersion),init_os.innerHTML=`Клавиатура создана в операционной системе: ${getOS()}`,alert("Привет. Нужно кое-что допилить. Пожалуйста не спиши проверять. Крайний срок вроде как до четверга включительно. Вот мой телеграмм для связи https://t.me/Roman914");let letters_ru=["ё","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","ф","ы","в","а","п","р","о","л","д","ж","э","я","ч","с","м","и","т","ь","б","ю","."],letters_en=["`","q","w","e","r","t","y","u","i","o","p","[","]","a","s","d","f","g","h","j","k","l",";","'","z","x","c","v","b","n","m",",",".","/"];const ru=document.querySelectorAll('[class*="ru"]');console.log(ru);let val=!1;function ru_lang(){val?(ru.forEach(((e,t)=>{e.innerHTML=letters_en[t]})),val=!1):(ru.forEach(((e,t)=>{e.innerHTML=letters_ru[t]})),val=!0)}function Backspace(){textarea.innerHTML=textarea.innerHTML.slice(0,cursor_position-1)+textarea.innerHTML.slice(cursor_position,textarea.innerHTML.length),textarea.selectionStart=--cursor_position}function getCaretPos(){return textarea.focus(),!1!==textarea.selectionStart?textarea.selectionStart:0}function printChar(e){textarea.innerHTML=textarea.innerHTML.slice(0,cursor_position)+e+textarea.innerHTML.slice(cursor_position,textarea.innerHTML.length),textarea.selectionStart=++cursor_position}CtrlLeft.addEventListener("click",ru_lang),document.addEventListener("DOMContentLoaded",(()=>{textarea.focus()})),textarea.addEventListener("blur",(()=>{textarea.focus()})),textarea.addEventListener("click",(e=>{cursor_position=getCaretPos()})),textarea.addEventListener("keydown",(e=>{e.preventDefault()})),wrapper.forEach((e=>{e.addEventListener("click",(e=>{let t=e.target;if(cursor_position=getCaretPos(),t.classList.contains("services_btn")||printChar(e.target.innerHTML),t.classList.contains("Backspace")&&Backspace(),t.classList.contains("Tab")&&printChar("\t"),t.classList.contains("Space")&&printChar(" "),t.classList.contains("Enter")&&printChar("\n"),t.classList.contains("Delete")&&(textarea.innerHTML=textarea.innerHTML.slice(0,cursor_position)+textarea.innerHTML.slice(cursor_position+1,textarea.innerHTML.length),textarea.selectionStart=cursor_position),t.classList.contains("CapsLock")){const e=document.querySelectorAll('[class*="Key"]');if("true"===t.getAttribute("data-val")){for(let t of e)t.innerHTML=t.innerHTML.toLowerCase();t.removeAttribute("data-val")}else{for(let t of e)t.innerHTML=t.innerHTML.toUpperCase();t.dataset.val="true"}}}))})),textarea.addEventListener("keydown",(e=>{wrapper.forEach((t=>{if(t.classList.contains(e.code)){if(t.classList.add("active"),t.classList.contains("services_btn")||printChar(t.innerHTML),t.classList.contains("Backspace")&&Backspace(),t.classList.contains("Tab")&&printChar("\t"),t.classList.contains("Space")&&printChar(" "),t.classList.contains("Enter")&&printChar("\n"),t.classList.contains("Delete")&&(textarea.innerHTML=textarea.innerHTML.slice(0,cursor_position)+textarea.innerHTML.slice(cursor_position+1,textarea.innerHTML.length),textarea.selectionStart=cursor_position),t.classList.contains("CapsLock")){const e=document.querySelectorAll('[class*="Key"]');if("true"===t.getAttribute("data-val")){for(let t of e)t.innerHTML=t.innerHTML.toLowerCase();t.removeAttribute("data-val")}else{for(let t of e)t.innerHTML=t.innerHTML.toUpperCase();t.dataset.val="true"}}t.classList.contains("ControlLeft")&&ru_lang()}}))})),textarea.addEventListener("keyup",(e=>{wrapper.forEach((e=>{e.classList.remove("active")}))}));