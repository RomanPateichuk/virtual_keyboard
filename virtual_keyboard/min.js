const wrapper=document.querySelectorAll(".keyboard_wrapper> div");let i=1,cursor_position=0;function Backspace(){console.log("cursor_position backspace: ",cursor_position),textarea.innerHTML=textarea.innerHTML.slice(0,cursor_position-1)+textarea.innerHTML.slice(cursor_position,textarea.innerHTML.length),textarea.selectionStart=--cursor_position}function getCaretPos(e){var t=document.getElementById(e);if(t.focus(),document.selection){var r=document.selection.createRange(),n=r.duplicate();return r.collapse(!0),n.moveToElementText(t),n.setEndPoint("EndToEnd",r),n.text.length}return!1!==t.selectionStart?t.selectionStart:0}document.addEventListener("DOMContentLoaded",(()=>{textarea.focus()})),textarea.addEventListener("blur",(()=>{textarea.focus()})),textarea.addEventListener("click",(e=>{cursor_position=getCaretPos("textarea")})),wrapper.forEach((e=>{e.addEventListener("click",(e=>{let t=e.target;cursor_position=getCaretPos("textarea"),t.classList.contains("services_btn")||(textarea.innerHTML+=e.target.innerHTML,textarea.selectionStart=i++),"Backspace"===t.innerHTML&&Backspace()}))}));