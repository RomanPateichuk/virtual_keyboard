const wrapper=document.querySelectorAll(".keyboard_wrapper> div");let i=1,cursor_position=null,servises=["Tab","ShiftLeft","CapsLock","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","ControlRight","ShiftRight","Enter","Delete","Backspace"];function Backspace(){textarea.innerHTML=textarea.innerHTML.slice(0,cursor_position-1)+textarea.innerHTML.slice(cursor_position,textarea.innerHTML.length),textarea.selectionStart=--cursor_position}function getCaretPos(){return textarea.focus(),!1!==textarea.selectionStart?textarea.selectionStart:0}function printChar(t){textarea.innerHTML=textarea.innerHTML.slice(0,cursor_position)+t+textarea.innerHTML.slice(cursor_position,textarea.innerHTML.length),textarea.selectionStart=++cursor_position}document.addEventListener("DOMContentLoaded",(()=>{textarea.focus()})),textarea.addEventListener("blur",(()=>{textarea.focus()})),textarea.addEventListener("click",(t=>{cursor_position=getCaretPos()})),textarea.addEventListener("keydown",(t=>{t.preventDefault()})),wrapper.forEach((t=>{t.addEventListener("click",(t=>{let e=t.target;cursor_position=getCaretPos(),e.classList.contains("services_btn")||printChar(t.target.innerHTML),e.classList.contains("Backspace")&&Backspace(),e.classList.contains("Tab")&&printChar("\t"),e.classList.contains("Space")&&printChar(" "),e.classList.contains("Enter")&&printChar("\n"),e.classList.contains("Delete")&&(textarea.innerHTML=textarea.innerHTML.slice(0,cursor_position)+textarea.innerHTML.slice(cursor_position+1,textarea.innerHTML.length),textarea.selectionStart=cursor_position)}))})),textarea.addEventListener("keydown",(t=>{wrapper.forEach((e=>{e.classList.contains(t.code)&&(e.classList.add("active"),e.classList.contains("services_btn")||printChar(e.innerHTML),e.classList.contains("Backspace")&&Backspace(),e.classList.contains("Tab")&&printChar("\t"),e.classList.contains("Space")&&printChar(" "),e.classList.contains("Enter")&&printChar("\n"),e.classList.contains("Delete")&&(textarea.innerHTML=textarea.innerHTML.slice(0,cursor_position)+textarea.innerHTML.slice(cursor_position+1,textarea.innerHTML.length),textarea.selectionStart=cursor_position))}))})),textarea.addEventListener("keyup",(t=>{wrapper.forEach((t=>{t.classList.remove("active")}))}));